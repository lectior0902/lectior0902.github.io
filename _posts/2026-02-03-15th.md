```python
from google.colab import drive
drive.mount('/content/drive')
```


```python
!jupyter nbconvert --to markdown "/content/drive/MyDrive/구름 생성AI/구름exp/데일리미션/26.02.03 데일리미션.ipynb"
```

# **Plotly 범례 지정하기**


```python
import plotly.express as px

# 실습 데이터 불러오기
df = px.data.iris()

# 실습 데이터 확인
df.head()
```

|index|sepal\_length|sepal\_width|petal\_length|petal\_width|species|species\_id|
|---|---|---|---|---|---|---|
|1|4\.9|3\.0|1\.4|0\.2|setosa|1|
|3|4\.6|3\.1|1\.5|0\.2|setosa|1|
|2|4\.7|3\.2|1\.3|0\.2|setosa|1|
|0|5\.1|3\.5|1\.4|0\.2|setosa|1|
|4|5\.0|3\.6|1\.4|0\.2|setosa|1|




```python
# 그래프 그리기
fig = px.scatter(df, x = "sepal_length", y = "sepal_width", color = "species")

fig.show()
```


<img width="763" height="525" alt="newplot (5)" src="https://github.com/user-attachments/assets/6947a0a5-2065-4182-ab7d-cbbc6e82a6f8" />



## **graph_objects**
- express보다 복잡함


```python
# graph_objects
# species 별로 데이터를 구분해서 따로 데이터셋을 만들어줌
# setosa, versicolor, virginica

setosa = df.loc[df["species"] == "setosa", :]
setosa.head()
```




|index|sepal\_length|sepal\_width|petal\_length|petal\_width|species|species\_id|
|---|---|---|---|---|---|---|
|0|5\.1|3\.5|1\.4|0\.2|setosa|1|
|1|4\.9|3\.0|1\.4|0\.2|setosa|1|
|2|4\.7|3\.2|1\.3|0\.2|setosa|1|
|3|4\.6|3\.1|1\.5|0\.2|setosa|1|
|4|5\.0|3\.6|1\.4|0\.2|setosa|1|




```python
versicolor = df.loc[df["species"] == "versicolor", :]
versicolor.head()
```




|index|sepal\_length|sepal\_width|petal\_length|petal\_width|species|species\_id|
|---|---|---|---|---|---|---|
|50|7\.0|3\.2|4\.7|1\.4|versicolor|2|
|51|6\.4|3\.2|4\.5|1\.5|versicolor|2|
|52|6\.9|3\.1|4\.9|1\.5|versicolor|2|
|53|5\.5|2\.3|4\.0|1\.3|versicolor|2|
|54|6\.5|2\.8|4\.6|1\.5|versicolor|2|




```python
virginica = df.loc[df["species"] == "virginica", :]
virginica.head()
```



|index|sepal\_length|sepal\_width|petal\_length|petal\_width|species|species\_id|
|---|---|---|---|---|---|---|
|100|6\.3|3\.3|6\.0|2\.5|virginica|3|
|101|5\.8|2\.7|5\.1|1\.9|virginica|3|
|102|7\.1|3\.0|5\.9|2\.1|virginica|3|
|103|6\.3|2\.9|5\.6|1\.8|virginica|3|
|104|6\.5|3\.0|5\.8|2\.2|virginica|3|



# **그래프 그리기**


```python
import plotly.graph_objects as go

fig = go.Figure()

fig.add_trace(go.Scatter(
    x = setosa.petal_length,
    y = setosa.petal_width,
    mode='markers',
    name="setosa"

))

fig.add_trace(go.Scatter(
    x = versicolor.petal_length,
    y = versicolor.petal_width,
    mode = 'markers',
    name = "versicolor"
))

fig.add_trace(go.Scatter(
    x = virginica.petal_length,
    y = virginica.petal_width,
    mode = 'markers',
    name = "virginica"
))

fig.show()
```


<img width="763" height="525" alt="newplot (6)" src="https://github.com/user-attachments/assets/406c5f43-1c07-430d-8d14-b04860cb4270" />



## **범례 위치 지정하기/가로로**
- 두 번 눌러서


```python
fig.update_layout(
            legend_orientation = "h",
            legend_entrywidth = 60,
            legend_x = 0.01,
            legend_y = 0.99,
            legend_xanchor = "left",
            legend_yanchor = "top"
            )
```


<img width="763" height="525" alt="newplot (7)" src="https://github.com/user-attachments/assets/dd2eb424-9c65-4306-b76c-e295307a7c7d" />



## **범례 스타일 지정**


```python
fig.update_layout(
                    legend_title_text = "Species",
                    legend_title_font_family = "Times New Roman",
                    legend_title_font_color = "Grey",
                    legend_title_font_size = 13,
                    legend_font_family = "Courier",
                    legend_font_size = 11,
                    legend_font_color = "black",
                    legend_bgcolor = "LightSteelBlue",
                    legend_bordercolor = "Black",
                    legend_borderwidth = 1
                )

fig.show()
```


<img width="763" height="525" alt="newplot (8)" src="https://github.com/user-attachments/assets/c5044607-2ee0-40fa-8e9e-fdf5b61c9e5b" />



# **Plotly 템플릿**


```python
# 템플릿 종류 확인

import plotly.io as pio
pio.templates
```




    Templates configuration
    -----------------------
        Default template: 'plotly'
        Available templates:
            ['ggplot2', 'seaborn', 'simple_white', 'plotly',
             'plotly_white', 'plotly_dark', 'presentation', 'xgridoff',
             'ygridoff', 'gridon', 'none']



## **default 템플릿**
- 기본 템플릿을 plotly_white로 지정


```python
import plotly.io as pio
pio.templates.default = "plotly_white"
```


```python
fig.show()
```


<img width="763" height="525" alt="newplot (9)" src="https://github.com/user-attachments/assets/8a39f351-d828-42c2-b642-de4f1b8db6b3" />




```python
import plotly.express as px
import plotly.io as pio

# iris 데이터: 'plotly_dark' 템플릿 적용

df_iris = px.data.iris()
fig_iris = px.scatter(df_iris, x = "sepal_width", y = "sepal_length",
                      color = "species",
                      template = "plotly_dark",
                      title = "Iris")




# tips 데이터: 'simple_white' 템플릿 적용
df_tips = px.data.tips()
fig_tips = px.histogram(df_tips, x = "day", y = "total_bill",
                        color = "sex", barmode = "group",
                        template = "simple_white",
                        title = "Tips")

```


```python
fig_iris.show()
```


<img width="763" height="525" alt="newplot (10)" src="https://github.com/user-attachments/assets/c6db9e3e-9eb0-4e25-892b-27e98567e814" />



```python
fig_tips.show()
```


<img width="763" height="525" alt="newplot (11)" src="https://github.com/user-attachments/assets/2e1b528e-c220-484d-a404-34495cd40930" />



#**Pandas Plotly Backend 설정**


```python
import pandas as pd
pd.options.plotting.backend = "plotly"
```


```python
# 확인용(white가 기본 템플릿으로 되어있어서 출력이 약간 다름)

import pandas as pd

pd.options.plotting.backend = "plotly"

df = pd.DataFrame(dict(a = [1,3,2], b = [3,2,1]))
fig = df.plot()
fig.show()
```


<img width="763" height="525" alt="newplot (12)" src="https://github.com/user-attachments/assets/4f0d1ce7-fe42-42a4-8aac-53834087f0b7" />



```python
import numpy as np

# 데이터 가져오기
df = pd.read_csv('train.csv')
```


```python
df.head(5)
```



|index|Passengerid|Age|Fare|Sex|sibsp|zero|zero\.1|zero\.2|zero\.3|zero\.4|zero\.5|zero\.6|Parch|zero\.7|zero\.8|zero\.9|zero\.10|zero\.11|zero\.12|zero\.13|
|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|
|0|1|22\.0|7\.25|0|1|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|
|1|2|38\.0|71\.2833|1|1|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|
|2|3|26\.0|7\.925|1|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|
|3|4|35\.0|53\.1|1|1|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|
|4|5|35\.0|8\.05|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|




```python
# Bar Plot: 등급(Pclass)별 사람 수 세기

plot_pclass = df['Pclass'].value_counts().sort_index()
fig1 = plot_pclass.plot.bar()
fig1.show()
```



<img width="763" height="525" alt="newplot (13)" src="https://github.com/user-attachments/assets/4279267e-0196-45cd-91e5-b4e38261e934" />




```python
# 히스토그램: 나이(Age), 요금(Fare)
df = pd.DataFrame(dict(
                    a = df['Age'],
                    b = df['Fare'])
)

fig2 = df.plot.hist()

fig2.show()
```


<img width="763" height="525" alt="newplot (14)" src="https://github.com/user-attachments/assets/71708e1d-3e70-43ea-bc3f-f45651382cd2" />



```python
# Box Plot: 요금(Fare)

fig3 = df.plot.box(
    y = "b",
    title = "요금"
)
fig3.show()
```


<img width="763" height="525" alt="newplot (15)" src="https://github.com/user-attachments/assets/ba8b955e-e997-494f-8c64-8049ef3c958c" />

