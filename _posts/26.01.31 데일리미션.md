```python
# 기존 kaleido 삭제 및 재설치
!pip uninstall kaleido -y
!pip install kaleido==0.2.1

# 구글 드라이브 마운트
from google.colab import drive
drive.mount('/content/drive')

# 설정 로드
import plotly.io as pio
import plotly.express as px
import plotly.graph_objects as go
pio.renderers.default = "png" # 모든 fig.show()가 그림 파일로 남게 함
```

    Found existing installation: kaleido 0.2.1
    Uninstalling kaleido-0.2.1:
      Successfully uninstalled kaleido-0.2.1
    Collecting kaleido==0.2.1
      Using cached kaleido-0.2.1-py2.py3-none-manylinux1_x86_64.whl.metadata (15 kB)
    Using cached kaleido-0.2.1-py2.py3-none-manylinux1_x86_64.whl (79.9 MB)
    Installing collected packages: kaleido
    Successfully installed kaleido-0.2.1





    ---------------------------------------------------------------------------

    KeyboardInterrupt                         Traceback (most recent call last)

    /tmp/ipython-input-3050745367.py in <cell line: 0>()
          5 # 구글 드라이브 마운트
          6 from google.colab import drive
    ----> 7 drive.mount('/content/drive')
          8 
          9 # 설정 로드


    /usr/local/lib/python3.12/dist-packages/google/colab/drive.py in mount(mountpoint, force_remount, timeout_ms, readonly)
         95 def mount(mountpoint, force_remount=False, timeout_ms=120000, readonly=False):
         96   """Mount your Google Drive at the specified mountpoint path."""
    ---> 97   return _mount(
         98       mountpoint,
         99       force_remount=force_remount,


    /usr/local/lib/python3.12/dist-packages/google/colab/drive.py in _mount(mountpoint, force_remount, timeout_ms, ephemeral, readonly)
        132   )
        133   if ephemeral:
    --> 134     _message.blocking_request(
        135         'request_auth',
        136         request={'authType': 'dfs_ephemeral'},


    /usr/local/lib/python3.12/dist-packages/google/colab/_message.py in blocking_request(request_type, request, timeout_sec, parent)
        174       request_type, request, parent=parent, expect_reply=True
        175   )
    --> 176   return read_reply_from_input(request_id, timeout_sec)
    

    /usr/local/lib/python3.12/dist-packages/google/colab/_message.py in read_reply_from_input(message_id, timeout_sec)
         94     reply = _read_next_input_message()
         95     if reply == _NOT_READY or not isinstance(reply, dict):
    ---> 96       time.sleep(0.025)
         97       continue
         98     if (


    KeyboardInterrupt: 



```python
# 1. 렌더러 확인
import plotly.io as pio
pio.renderers.default = "png"
```

# **1. Plotly 그래프 생성과 add.trace()**


```python
import plotly.express as px
import plotly.graph_objects as go

# express로 Scatter Plot 만들어보기 (식사 금액 대비 팁)
df_tips = px.data.tips()
fig = px.scatter(df_tips, x="total_bill", y="tip", color="sex",
                 title="[1] Scatter Plot에 추세선 그리기")

fig.show()
```


    
![png](images/26.01.31%20%EB%8D%B0%EC%9D%BC%EB%A6%AC%EB%AF%B8%EC%85%98_3_0.png)
    



```python
# add_trace()를 사용
# 평균을 보여주기 위해 (0,0)에서 (50, 10)까지 잇는 선을 그림
fig.add_trace(
    go.Scatter(
        x=[0, 50],
        y=[0, 10],
        mode="lines",
        line=go.scatter.Line(color="black"),
        showlegend=False)
)

fig.show()
```


    
![png](images/26.01.31%20%EB%8D%B0%EC%9D%BC%EB%A6%AC%EB%AF%B8%EC%85%98_4_0.png)
    


#**2. Plotly Trace 업데이트**


```python
from plotly.subplots import make_subplots

# 1행 2열의 서브플롯 만들기
fig = make_subplots(rows=1, cols=2)

# 첫 번째 칸에 요일별 팁 합계 추가
day = df_tips.groupby('day', as_index=False)['tip'].sum()


fig.add_trace(go.Bar(x=day['day'], y=day['tip'], name="Day Total"), row=1, col=1)

# 두 번째 칸에 시간대별(Lunch/Dinner) 팁 합계 추가
time = df_tips.groupby('time', as_index=False)['tip'].sum()

fig.add_trace(go.Bar(x=time['time'], y=time['tip'], name="Time Total"), row=1, col=2)

# 4. update_traces를 활용해 모든 Bar 그래프의 색상과 불투명도 일괄 업데이트
fig.update_traces(marker=dict(color="LightSeaGreen"),
                  selector=dict(type="bar"))

fig.show()
```


    
![png](images/26.01.31%20%EB%8D%B0%EC%9D%BC%EB%A6%AC%EB%AF%B8%EC%85%98_6_0.png)
    



```python
# update_layput()을 활용해서 제목 추가

fig.update_layout(title_text="Subplot",title_font_size=20)
```


    
![png](images/26.01.31%20%EB%8D%B0%EC%9D%BC%EB%A6%AC%EB%AF%B8%EC%85%98_7_0.png)
    



```python
fig.update_xaxes(title_text='Time')
fig.update_yaxes(title_text='Tip ($)')

fig.show()
```


    
![png](images/26.01.31%20%EB%8D%B0%EC%9D%BC%EB%A6%AC%EB%AF%B8%EC%85%98_8_0.png)
    


#**3. 축 범위 지정 및 스타일 수정**


```python
# 데이터 불러오기 (국가별 1인당 GDP와 기대수명)
df_gap = px.data.gapminder()

# Figure 생성
fig = px.scatter(df_gap, x="gdpPercap", y="lifeExp",
                 size="pop", color="continent", hover_name="country")

fig.show()
```


    
![png](images/26.01.31%20%EB%8D%B0%EC%9D%BC%EB%A6%AC%EB%AF%B8%EC%85%98_10_0.png)
    



```python
# 축 설정 업데이트
fig.update_layout(title="GDP 대비 기대수명")

# x축: GDP 편차가 크므로 Log 스케일 적용, 그리드 색상 변경
fig.update_xaxes(title_text="GDP 대비 기대수명(Log)", type="log",
                 showgrid=True, gridwidth=1, gridcolor='LightGray')

fig.show()
```


    
![png](images/26.01.31%20%EB%8D%B0%EC%9D%BC%EB%A6%AC%EB%AF%B8%EC%85%98_11_0.png)
    



```python
# y축: 기대수명의 범위를 30세~90세로 고정, 타이틀 폰트 크기와 색깔 바꿔보기
fig.update_yaxes(range=[30, 90], title_text="Life Expectancy",
                 title_font=dict(size=20, color="crimson"))

fig.show()
```


    
![png](images/26.01.31%20%EB%8D%B0%EC%9D%BC%EB%A6%AC%EB%AF%B8%EC%85%98_12_0.png)
    



```python
# 3. 변환 실행 (노트북과 같은 폴더에 생성됨)
target_file = "/content/drive/MyDrive/구름 생성AI/구름exp/26.01.31 데일리미션.ipynb"
!jupyter nbconvert --to markdown "{target_file}" --extract-output
```

    usage: jupyter-nbconvert [-h] [--debug] [--show-config] [--show-config-json]
                             [--generate-config] [-y] [--execute] [--allow-errors]
                             [--stdin] [--stdout] [--inplace] [--clear-output]
                             [--coalesce-streams] [--no-prompt] [--no-input]
                             [--allow-chromium-download]
                             [--disable-chromium-sandbox] [--show-input]
                             [--embed-images] [--sanitize-html]
                             [--log-level NbConvertApp.log_level]
                             [--config NbConvertApp.config_file]
                             [--to NbConvertApp.export_format]
                             [--template TemplateExporter.template_name]
                             [--template-file TemplateExporter.template_file]
                             [--theme HTMLExporter.theme]
                             [--sanitize_html HTMLExporter.sanitize_html]
                             [--writer NbConvertApp.writer_class]
                             [--post NbConvertApp.postprocessor_class]
                             [--output NbConvertApp.output_base]
                             [--output-dir FilesWriter.build_directory]
                             [--reveal-prefix SlidesExporter.reveal_url_prefix]
                             [--nbformat NotebookExporter.nbformat_version]
                             [extra_args ...]
    jupyter-nbconvert: error: unrecognized arguments: --extract-output



```python

```


```python
!jupyter nbconvert --to markdown "/content/drive/MyDrive/구름 생성AI/구름exp/26.01.31 데일리미션.ipynb" \
    --output-dir="/content/drive/MyDrive/구름exp" \
    --NbConvertApp.output_files_dir='images'
```

    [NbConvertApp] Converting notebook /content/drive/MyDrive/구름 생성AI/구름exp/26.01.31 데일리미션.ipynb to markdown
    /usr/local/share/jupyter/nbconvert/templates/base/display_priority.j2:32: UserWarning: Your element with mimetype(s) dict_keys(['application/vnd.colab-display-data+json']) is not able to be represented.
      {%- elif type == 'text/vnd.mermaid' -%}
    [NbConvertApp] Writing 296411 bytes to /content/drive/MyDrive/구름exp/26.01.31 데일리미션.md



```python
# 1. 드라이브 전체에서 오늘 생성된 .md 파일 찾기
!find /content/drive/MyDrive -name "*.md" -mtime -1

# 2. images 폴더가 어디에 생겼는지 찾기
!find /content/drive/MyDrive -name "images" -type d
```

    /content/drive/MyDrive/구름 생성AI/줌 강의/26.01.26 줌 강의 개념정리.md
    /content/drive/MyDrive/구름 생성AI/줌 강의/26.01.31. Plotly 해보기(~xaxes, yaxes까지).md
    /content/drive/MyDrive/구름 생성AI/구름exp/26.01.27 데일리미션.md
    /content/drive/MyDrive/구름 생성AI/구름exp/26.01.26 데일리미션.md
    /content/drive/MyDrive/구름exp/26.01.31 데일리미션.md

